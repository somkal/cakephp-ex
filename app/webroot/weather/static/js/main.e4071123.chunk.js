(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{36:function(e,t,a){},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(15),r=a.n(c),o=(a(36),a(8)),i=a(9),l=a(7),h=a(11),d=a(10),j=(a(37),a(46)),u=a(47),b=a(48),m=a(49),O=a(55),x=a(53),p=a(54),f=a(1),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(o.a)(this,a),(s=t.call(this,e)).toggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode}}))},s.setSearchInput=function(e){s.setState({searchInput:e.target.value})},s.addLocation=function(){var e="https://nominatim.openstreetmap.org/search?limit=1&format=json&addressdetails=1&country=US",t=s.state.searchInput;if(5===t.length&&parseInt(t)>0)e+="&postalcode="+t;else{if(!(t.length>2))return;e+="&q="+t}console.log(e),fetch(e).then((function(e){return e.json()})).then((function(e){return e.length>0?{name:e[0].address.city||e[0].display_name.split(",")[0],lat:parseFloat(e[0].lat).toFixed(6),lng:parseFloat(e[0].lon).toFixed(6)}:{}})).then((function(e){if(e!=={}){var t="https://api.weather.gov/points/"+e.lat+","+e.lng;console.log(t),fetch(t).then((function(e){return e.json()})).then((function(t){var a={name:e.name,lat:parseFloat(e.lat),lng:parseFloat(e.lng),hfurl:t.properties.forecastHourly,dfurl:t.properties.forecast},n=s.state.locations;n.push(a),s.setState({locations:n,searchInput:""},localStorage.setItem("locations",JSON.stringify(n)))}))}}))},s.deleteLocation=function(e){var t=s.state.locations;-1!==e.target.value&&(t.splice(e.target.value,1),s.setState({locations:t},localStorage.setItem("locations",JSON.stringify(t))))},s.showForecast=function(e){s.props.onTabChange("forecast");var t=s.state.locations[e.target.value];s.props.onLocChange(t)},s.setSearchInput=s.setSearchInput.bind(Object(l.a)(s)),s.deleteLocation=s.deleteLocation.bind(Object(l.a)(s)),s.showForecast=s.showForecast.bind(Object(l.a)(s));var n=JSON.parse(localStorage.getItem("locations"))||[];return s.state={searchInput:"",locations:n,editMode:!(n.length>0)},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(f.jsxs)(j.a,{className:"pl-1 pr-1",children:[Object(f.jsxs)(u.a,{className:"mt-3 mb-2",children:[Object(f.jsxs)(b.a,{className:"mt-2",children:[Object(f.jsx)("img",{className:"today-logo",src:"logo.png",alt:"weather-logo"}),Object(f.jsx)("strong",{children:"Weather"})]}),Object(f.jsx)(b.a,{xs:3,sm:2,style:{display:"flex",justifyContent:"flex-end"},children:Object(f.jsx)(m.a,{onClick:this.toggleEditMode,children:"+/-"})})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)(u.a,{children:[Object(f.jsx)(O.a,{children:this.state.locations.map((function(t,a){return Object(f.jsx)(O.a.Item,{className:"row-striped",children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(b.a,{className:"".concat(e.state.editMode?"":"d-none"),children:Object(f.jsx)(m.a,{variant:"danger",value:a,onClick:e.deleteLocation,children:"X"})}),Object(f.jsx)(b.a,{xs:6,sm:8,md:10,children:Object(f.jsx)("strong",{children:t.name})}),Object(f.jsx)(b.a,{style:{display:"flex",justifyContent:"flex-end"},children:Object(f.jsx)(m.a,{value:a,onClick:e.showForecast,children:">"})})]})},a)}))}),Object(f.jsxs)(x.a,{className:"mt-3 ".concat(this.state.editMode?"":"d-none"),children:[Object(f.jsx)(p.a,{type:"text",placeholder:"ZIP Code or US Address",value:this.state.searchInput,onChange:this.setSearchInput,onKeyPress:function(t){"Enter"===t.key&&e.addLocation()}}),Object(f.jsx)(m.a,{onClick:this.addLocation,children:"+"})]})]})]})}}]),a}(n.a.Component),v=a(52),y=a(51),S=a(50),w=function(e,t){return{temperature:e.temperature<t.temperature?e.temperature:t.temperature}},L=function(e,t){return{temperature:e.temperature>t.temperature?e.temperature:t.temperature}},N=function(e){return new Date(e.startTime).getDate()===(new Date).getDate()},C=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoaded:!1,now:{},hours:[]},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.loc.hfurl;console.log(t),fetch(t).then((function(e){return e.json()})).then((function(t){var a=t.properties.periods,s=a.filter(N);e.setState({now:{data:a[0],tmin:s.reduce(w).temperature,tmax:s.reduce(L).temperature},hours:a.slice(0,24),isLoaded:!0})}))}},{key:"render",value:function(){var e;return e=this.state.isLoaded?Object(f.jsxs)(j.a,{children:[Object(f.jsx)(u.a,{className:"mt-2",children:Object(f.jsxs)(b.a,{className:"text-center today-box",children:[Object(f.jsx)("img",{className:"today-icon",src:this.state.now.data.icon,alt:this.state.now.data.shortForecast}),Object(f.jsxs)("span",{className:"today-temp",children:["\xa0",this.state.now.data.temperature,"\xb0"]})]})}),Object(f.jsxs)(u.a,{className:"mt-2 mb-2 text-center",children:[Object(f.jsx)(b.a,{xs:12,sm:4,children:Object(f.jsxs)("small",{children:["H: ",this.state.now.tmax,"\xb0 \xa0 L: ",this.state.now.tmin,"\xb0"]})}),Object(f.jsx)(b.a,{xs:12,sm:4,children:this.state.now.data.shortForecast}),Object(f.jsx)(b.a,{xs:12,sm:4,children:Object(f.jsxs)("small",{className:"text-muted",children:["Wind\xa0",this.state.now.data.windSpeed," ",this.state.now.data.windDirection]})})]})]}):Object(f.jsx)(S.a,{animation:"border",role:"status"}),Object(f.jsxs)(j.a,{fluid:!0,children:[e,Object(f.jsx)(u.a,{className:"mt-4",children:Object(f.jsx)(b.a,{className:"mt-4",children:"Next 24 Hour Forecast"})}),Object(f.jsx)("hr",{}),Object(f.jsx)(u.a,{className:"mt-2",children:this.state.hours.map((function(e,t){return Object(f.jsxs)(b.a,{xs:3,sm:2,lg:1,children:[Object(f.jsx)(u.a,{className:"mt-4",children:Object(f.jsx)("small",{className:"text-muted",children:new Date(e.startTime).toLocaleString("en-US",{hour:"numeric",hour12:!0})})}),Object(f.jsx)(u.a,{children:Object(f.jsx)("span",{children:Object(f.jsxs)("strong",{children:[e.temperature,"\xb0"]})})})]},t)}))})]})}}]),a}(n.a.Component),k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={isLoaded:!1,slots:[]},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.loc.dfurl;console.log(t),fetch(t).then((function(e){return e.json()})).then((function(t){var a=t.properties.periods;e.setState({slots:a.slice(0,14),isLoaded:!0})}))}},{key:"render",value:function(){var e;return this.state.isLoaded||(e=Object(f.jsx)(S.a,{animation:"border",role:"status"})),Object(f.jsxs)(j.a,{className:"pl-1 pr-1",children:[e,this.state.slots.map((function(e,t){return Object(f.jsxs)(u.a,{className:"pt-2 pb-2 row-striped",children:[Object(f.jsx)(b.a,{xs:4,sm:3,md:2,children:Object(f.jsx)("img",{src:e.icon,alt:e.shortForecast,height:"60px"})}),Object(f.jsxs)(b.a,{children:[Object(f.jsx)("strong",{children:new Date(e.startTime).toLocaleString("en-US",{day:"numeric",month:"numeric"})}),Object(f.jsx)("br",{}),Object(f.jsx)("small",{children:e.name})]}),Object(f.jsxs)(b.a,{xs:12,sm:6,children:[Object(f.jsxs)(u.a,{children:[Object(f.jsxs)(b.a,{xs:4,children:[e.temperature,"\xb0",e.temperatureUnit]}),Object(f.jsx)(b.a,{children:Object(f.jsxs)("small",{children:[e.windSpeed," ",e.windDirection]})})]}),Object(f.jsx)(u.a,{children:Object(f.jsx)("small",{children:Object(f.jsx)("small",{children:e.detailedForecast})})})]})]},t)}))]})}}]),a}(n.a.Component),F=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).showLocations=function(){s.props.onTabChange("home")},s.showLocations=s.showLocations.bind(Object(l.a)(s)),s.state={key:"today",loc:s.props.loc},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(f.jsxs)(j.a,{children:[Object(f.jsxs)(u.a,{className:"mt-3 mb-3",children:[Object(f.jsx)(b.a,{children:Object(f.jsx)("h1",{children:this.state.loc.name})}),Object(f.jsx)(b.a,{xs:2,style:{display:"flex",justifyContent:"flex-end"},children:Object(f.jsx)(m.a,{variant:"danger",onClick:this.showLocations,children:"X"})})]}),Object(f.jsx)(u.a,{children:Object(f.jsxs)(v.a,{id:"weather-forecast-tabs",activeKey:this.state.key,mountOnEnter:!0,onSelect:function(t){return e.setState({key:t})},children:[Object(f.jsx)(y.a,{eventKey:"today",title:"Today's Weather",children:Object(f.jsx)(C,{loc:this.state.loc})}),Object(f.jsx)(y.a,{eventKey:"weekly",title:"Next 7 Days",children:Object(f.jsx)(k,{loc:this.state.loc})})]})})]})}}]),a}(n.a.Component),I=(a(43),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).handleSetLoc=function(e){s.setState({loc:e})},s.handleSetTab=function(e){s.setState({tab:e})},s.handleSetLoc=s.handleSetLoc.bind(Object(l.a)(s)),s.handleSetTab=s.handleSetTab.bind(Object(l.a)(s)),s.state={tab:"home",loc:{}},s}return Object(i.a)(a,[{key:"render",value:function(){return Object(f.jsxs)(j.a,{fluid:!0,children:["forecast"===this.state.tab&&Object(f.jsx)(F,{loc:this.state.loc,onTabChange:this.handleSetTab}),"forecast"!==this.state.tab&&Object(f.jsx)(g,{onLocChange:this.handleSetLoc,onTabChange:this.handleSetTab})]})}}]),a}(n.a.Component)),T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root")),T()}},[[44,1,2]]]);
//# sourceMappingURL=main.e4071123.chunk.js.map